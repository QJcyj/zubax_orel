%
% Copyright (c) 2017  Zubax Robotics OU  <info@zubax.com>
%
% Distributed under BY-NC-ND (attribution required, non-commercial use only, no derivatives).
%

\documentclass{zubaxdoc}
\graphicspath{{document_templates/documentation_template_latex/}}

\title{Zubax Orel 20 Datasheet}

\begin{document}
\frontmatter

\begin{titlepage}

\section*{Overview}

Zubax Orel 20 is an advanced sensorless BLDC propeller drive controller with doubly redundant CAN bus interface.
Zubax Orel 20 runs the Sapog\footnote{Refer to the Sapog Reference Manual for information.}
firmware.

\section*{Features}

\begin{itemize}
    \item Excellent dynamic characteristics.
    \item Regenerative braking and active freewheeling.
    \item 350 W continuous power output at under 10 g weight.
    \item Optional RPM control loop (RPM governor).
    \item Self diagnostics and health status reporting.
    \item Highly configurable.
    \item Low noise and low current ripple due to low ESR filtering capacitors and high frequency PWM.
    \item Supported interfaces:
    \begin{itemize}
        \item CAN (UAVCAN), with optional double redundancy.
        \item UART (command line interface suitable for M2M use).
        \item RCPWM (analog PWM interface widely used in robotics).
    \end{itemize}
    \item High quality assurance:
    \begin{itemize}
        \item Every manufactured unit undergoes a strict testing procedure.
        The testing log for each produced unit is available to the user via the website at\\
        \url{https://device.zubax.com/device_info}.
        \item Protection against unlicensed (counterfeit) production by means of a digital signature
        installed on every manufactured unit.
    \end{itemize}
    \item Open source firmware -- Sapog (3-clause BSD license).
\end{itemize}

\BeginRightColumn
\section*{Applications}

\begin{itemize}
    \item Propeller drives for unmanned aerial vehicles.
    \item Pump and propeller drives for unmanned watercraft.
\end{itemize}

\centering
\includegraphics[width=0.45\textwidth]{image}
\includegraphics[width=0.45\textwidth]{image2}
\includegraphics[width=0.45\textwidth]{bottom}

\end{titlepage}

\tableofcontents
\listoffigures
\listoftables

\mainmatter

\chapter{Overview}

Zubax Orel 20 is an advanced controller of sensorless BLDC motors designed for use in
cost sensitive applications.
Its primary application domains include propulsion systems of electric unmanned aircraft
and watercraft.

Zubax Orel 20 runs Sapog - an open source multiplatform BLDC controller firmware
developed by Zubax Robotics.
Please refer to the Sapog Reference Manual\footnote{Available from the Zubax Robotics website.}
for its usage information.
This datasheet is focused only on the hardware aspect of the product.

\section{System integration}

Zubax Orel 20 is a single supply device, which means that the device does
not require any supply inputs except for the high power supply.
The DroneCode debug port (UART/RCPWM) provides access to the device's internal 3.3 V rail,
although it is not designed to provide power to any external loads.
The 5 V rails of the CAN interfaces are not used by the device; rather,
they connect the 5 V rails of their respective CAN connector pairs directly together.

\begin{figure}[hb]
    \centering
	\includegraphics[width=\textwidth]{can_daisy_chain}
	\caption{Connection of CAN nodes in non-redundant and doubly redundant CAN bus configurations.
	\label{can_daisy_chain_non_redundant}}
\end{figure}

\section{Quality assurance}

Every manufactured Zubax Orel 20 undergoes an automated testing procedure that validates that
the device is functioning as designed.
The test log for every manufactured device is available on the web at
\url{https://device.zubax.com/device_info}.
This feature can be used to facilitate traceability of purchased devices and
provide additional safety assurances.

Besides testing, every manufactured device has a digital signature installed,
that can be used as a strong protection against unlicensed or counterfeit manufacturing.
Please refer to the dedicated documents or contact Zubax Robotics to find out
the specifics about digital signature verification.

\section{Enclosure}\label{sec:enclosure}

Zubax Orel 20 is intended for integration into the end system in the form of the bare PCB,
as this facilitates better heat dissipation, lower weight and tighter arrangement of components
in the end device, all of which are desirable properties in the target application domains.

Shall it be desired to provide additional mechanical protection for the device,
the plastic enclosure pictured on the figure \ref{enclosure} can be used.
Please contact your supplier for the ordering information;
alternatively, visit \url{https://github.com/Zubax/zubax_orel} to download
3D printable enclosure models suitable for in-house manufacturing.

\begin{figure}[hb]
	\centering
	\includegraphics[width=0.45\textwidth]{enclosure-open}
	\includegraphics[width=0.45\textwidth]{enclosure-closed}
	\caption{Plastic enclosure.\label{enclosure}}
\end{figure}

\section{Accessories}

Zubax Orel 20 can be used with the following accesories:

\begin{itemize}
    \item Enclosure (suitable for 3D printing). See section \ref{sec:enclosure}.
    \item UAVCAN Micro patch cable.
    \item UAVCAN Micro adapter cables.
    \item UAVCAN Micro termination plug.
    \item Zubax DroneCode Debug Probe.
\end{itemize}

Please contact your supplier for ordering information.

\chapter{Characteristics}

\section{Absolute maximum ratings}

Subjecting the device to stresses beyond those specified in this section may cause
permanent damage to the device.
Proper operation of the device within the ranges specified in this section is not implied.

\begin{ZubaxSimpleTable}{Absolute maximum ratings}{|c X|c c|c|}
    Symbol            & Parameter                & Min  & Max & Units \\
	$V_\text{inv}$    & Supply voltage           & -0.3 & 19  & V \\
	$T_\text{oper}$   & Operating temperature    & -50  & 125 & \degree{}C \\
	                  & UART/RCPWM input voltage & -0.3 & 7   & V\\
	                  & CAN H/L input voltage    & -4   & 16  & V\\
\end{ZubaxSimpleTable}

\section{Environmental conditions}

\begin{ZubaxSimpleTable}{Environmental conditions}{|c X|l|c c|c|}
    Symbol & Parameter & Note & Min & Max & Units \\
	$T_\text{oper}$ & Operating temperature &                            & -40 & 105 & \degree{}C \\
	$T_\text{stor}$ & Storage temperature   &                            & -40 & 50  & \degree{}C \\
	$\phi_\text{oper}$ & Operating humidity & Condensation not permitted & 0   & 100 & \%RH\\
	$h_\text{oper}$ & Operating altitude    & Above mean sea level (MSL) &     & 10  & km\\
\end{ZubaxSimpleTable}

\section{Reliability}

\begin{ZubaxSimpleTable}{Reliability}{|c X|c|c|}
    Symbol & Parameter & Typ & Units \\
	MTTF   & Mean time to failure & 100000 & hours \\
\end{ZubaxSimpleTable}

\section{Power characteristics}

During regenerative braking, the device will be performing energy transfer from the motor
to the power supply network.
If the self resistance of the power supply network is not sufficiently low,
the regenerative energy transfer may lead to increase of the supply voltage beyond
the safe operating limits.
This event will trigger activation of the transient voltage suppression (TVS) circuit,
which will absorb some of the excessive energy.
If the amount of recovered energy exceeds the absorbtion capabilities of the power supply
network and the TVS circuit, the device may incur fatal damage.

\begin{ZubaxTableWrapper}{Power characteristics}
	\begin{ZubaxWrappedTable}{|c X|c c c|c|}
	    Symbol & Parameter & Min & Typ & Max & Units \\
		$P$                 & Continuous power                    &      &      & 350  & W \\
		$P_\text{peak}$     & Peak power                          &      &      & 1000 & W \\
		$I_\text{inv}$      & Continuous DC current               &      &      & 20   & A \\
		$I_\text{inv-peak}$ & Peak DC current                     &      &      & 55   & A \\
		$I_\text{idle}$     & Idle current consumption            &      & 50   &      & mA \\
		$V_\text{inv}$      & Supply voltage\tnote{1}             & 9    & 14.8 & 18.5 & V \\
	    $V_\text{TVS}$      & TVS circuit activation voltage      & 19   &      & 21   & V \\
	    $P_\text{TVS}$      & TVS circuit energy absorbtion
	                          capability\tnote{2}                 &      & 5    &      & J \\
		$\theta_\text{JA}$  & Junction-to-air thermal resistance  &      & 50   &      & K/W \\
	    $R_\text{DS-on}$    & FET drain-source on-state resistance&      & 1.6  & 1.9  & $\text{m}\Omega$ \\
	    $R_\text{phase}$    & Cumulative resistance of the
	                          inverter per phase               &      & 5    &      & $\text{m}\Omega$ \\
	\end{ZubaxWrappedTable}
	\begin{tablenotes}
	    \item [1] Suitable battery packs per chemistry type:\\
	    \begin{ZubaxCompactTable}{|c c c|}
		    Chemistry         & Nominal cell voltage [V] & Cells in series [S]\\
		    $\text{LiCoO}_2$  & 3.7                      & \numrange{3}{4}\\
		    $\text{LiFePO}_4$ & 3.3                      & \numrange{4}{5}\\
		    $\text{NiCd}$, $\text{NiMH}$ & 1.2           & \numrange{10}{12}\\
		    $\text{Pb}$       & 2.0                      & \numrange{6}{8}\\
	    \end{ZubaxCompactTable}

	    \item [2] At $T = 25\text{\degree{}C}$, non-repetitive.
	\end{tablenotes}
\end{ZubaxTableWrapper}

\section{Communication interfaces}

\begin{ZubaxTableWrapper}{Characteristics of CAN bus interfaces}
	\begin{ZubaxWrappedTable}{|c X|c c c|c|}
		Symbol  & Parameter                                 & Min  & Typ  & Max  & Units \\
		        & Bit rate                                  & 20   &      & 1000 & Kbps \\
		        & Positive-going input threshold voltage    &      & 750  & 900  & mV \\
		        & Negative-going input threshold voltage    & 500  & 600  &      & mV \\
		        & Differential output voltage, dominant     & 1.5  & 2.0  & 3.0  & V \\
		        & Differential output voltage, recessive    & -120 & 0    & 12   & mV \\
		        & Bus power rail\tnote{1}\space{} voltage           & -10  &      & 10   & V \\
		        & Bus power rail\tnote{1}\space{} inter-connector current & -1 &  & 1    & A \\
		        & Connector resistance during device lifetime &    & 30   & 50   & $\text{m}\Omega$ \\
	\end{ZubaxWrappedTable}
	\begin{tablenotes}
	    \item [1] Not connected to the device's circuits internally. The limit is imposed by the PCB.
	\end{tablenotes}
\end{ZubaxTableWrapper}

\begin{ZubaxSimpleTable}{DroneCode debug port characteristics}{|c X|c c c|c|}
	Symbol  & Parameter                                 & Min  & Typ  & Max  & Units \\
			& Low-level input voltage                   & -0.3 & 0    & 1.6  & V\\
			& High-level input voltage                  & 2.1  & 3.3  & 5.5  & V\\
			& Low-level output voltage                  & 0    & 0    & 0.5  & V\\
			& High-level output voltage                 & 2.8  & 3.3  & 3.4  & V\\
			& Source/sink current via data pins         &      &      & 10   & mA\\
	$V_\text{DCDP}$ & Power rail output voltage         & 3.2  & 3.3  & 3.4  & V\\
	$I_\text{DCDP}$ & Power rail load capability        &      &      & 3    & mA\\
	        & Connector resistance during device lifetime &    & 20   & 40   & $\text{m}\Omega$\\
\end{ZubaxSimpleTable}

\begin{ZubaxSimpleTable}{RCPWM input interface characteristics}{|c X|c c c|c|}
	Symbol  & Parameter                                 & Min  & Typ  & Max  & Units \\
			& Low-level input voltage                   & -0.3 & 0    & 1.6  & V\\
			& High-level input voltage                  & 2.1  & 3.3  & 5.5  & V\\
\end{ZubaxSimpleTable}

\section{Mechanical characteristics}

The drawing \ref{drawing} documents the basic mechanical characteristics of Zubax Orel 20,
such as the placement of connectors and mounting holes.

Both connectors of the primary CAN interface are located on the top side of the board.
They are explicitly marked as \verb|CAN1| on the PCB silkscreen.
Connectors of the secondary CAN interface are located on the bottom side of the board,
and marked \verb|CAN2|.

For reference, the red (positive) power supply wire is connected to the top side of the board.

\begin{figure}[hb]
	\centerline{\includegraphics[width=1.1\textwidth]{drawing}}
	\caption{PCB drawing (to scale).\label{drawing}}
\end{figure}

\begin{ZubaxSimpleTable}{Mechanical characteristics}{|c X|l|c|c|}
    Symbol & Parameter & Note                     & Typ & Units \\
	$m$    & Mass      & Power wires not included & 10  & g \\
\end{ZubaxSimpleTable}

\chapter{Communication interfaces}

\section{CAN bus}

\section{UART}

\section{RCPWM}

\end{document}
